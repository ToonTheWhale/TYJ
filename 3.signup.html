<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/public/styles/pokémon.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <title>Document</title>
  </head>
  <body>
    <nav>
      <a href="1.landingPage.html"><img src="/public/images/Logo.png" alt="" /></a>
      <button onclick="openMenu()" class="menu-hamburger">
        <i class="fa fa-bars" style="font-size: 40px"></i>
      </button>
      <section id="overlay-Menu" class="overlay-Menu">
        <ul class="menu" style="padding: 0">
          <li style="margin: 0; border: none">
            <button class="layer-close-button" onclick="closeMenu()">
              <i class="fa fa-times" aria-hidden="true"></i>
            </button>
          </li>
          <li><a href="/5.home.html">Home</a></li>
          <li><a href="/6.pokedex.html">PokéDex</a></li>
          <li><a href="/7.myPokemons.html">Mijn Pokemons</a></li>
          <li><a href="/11.vechten.html">Pokemon Battler</a></li>
          <li><a href="/9.catchPokemon.html">Pokemon vangen</a></li>
          <li><a href="/10.vergelijken.html">Pokemon vergelijken</a></li>
          <li><a href="/12.guessPokemon.html">Who’s that pokemon</a></li>
          <li>
            <p
              style="
                margin: auto;
                font-size: 25px;
                font-weight: 900;
                margin-right: 10px;
              "
            >
              Huidige Pokémon :
            </p>
            <img
              onclick="openPopupCurrentPokemon()"
              src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/101.png"
              id="current-pokemon"
              class="current-pokemon"
            />
          </li>
        </ul>
      </section>
      <div id="overlay" class="overlay"></div>
    </nav>
  </body>
  <script>
    // script dient voor de sidepdown nav
    function openMenu() {
      document.getElementById("overlay-Menu").style.display = "block";
      document.getElementById("overlay").style.display = "block";
    }
    function closeMenu() {
      document.getElementById("overlay-Menu").style.display = "none";
      document.getElementById("overlay").style.display = "none";
    }
  </script>
  <body>
    <main>
      <section class="main_login">
        <div class="form-post">
          <h2>Sign Up</h2>
          <br />
          <form action="/4.starterPokemon.html" method="get" class="login">
            <label for="username:"> Username </label>
            <input
              class="input"
              type="text"
              id="username"
              name="username"
              value="user_example"
              required
            /><br />
            <label for="emailAddress"> EmailAddress </label>
            <input
              class="input"
              type="text"
              id="emailAddress"
              name="emailAddress"
              value="user@example.com"
              required
            /><br />
            <label for="password"> Password </label>
            <input
              class="input"
              type="password"
              id="password"
              name="password"
              value="123456789"
              required
            /><br />
            <input class="submit" type="submit" />
          </form>
        </div>
      </section>
    </main>
  </body>
  <!-- popup code header  -->

  <dialog id="popup-CurrentPokemon" class="popup">
    <h2>Selecteer een Pokémon</h2>
    <input
      type="text"
      id="myInputHeader"
      onkeyup="filterPokemonByNameHeader()"
      placeholder="Pokemon zoeken ..."
    />
    <section class="image-container" id="image-container-header"></section>
    <button onclick="closePopupCurrentPokemon()" id="button">Close</button>
  </dialog>
  <div id="overlay-CurrentPokemon" class="overlay"></div>

  <!-- popup code  -->

  <dialog id="popup" class="popup">
    <h2>Selecteer een Pokémon</h2>
    <input
      type="text"
      id="myInput"
      onkeyup="filterPokemonByName()"
      placeholder="Pokemon zoeken ..."
    />
    <section class="image-container" id="image-container"></section>
    <button onclick="closePopup()" id="button">Close</button>
  </dialog>
  <div id="overlay" class="overlay"></div>

  <footer class="footer-1">
    <article>
      <p>
        <img src="/public/images/Logo.png" alt="" class="footer-logo" />
      </p>
    </article>
    <article>
      <p>
        <img
          src="/public/images/icons8-location-50.png"
          alt=""
          class="footer-icon"
        />Ellermanstraat 33, 2060 Antwerpen<br />
        <img
          src="/public/images/icons8-phone-50.png"
          alt=""
          class="footer-icon"
        />
        +324 12 34 56 78
      </p>
    </article>
    <article>
      <p>
        Authors: TYJ <br />
        <a href="">info@TYJ-Pokémons.com</a>
      </p>
    </article>
  </footer>
  <footer class="footer-2">
    <p>&copy;TYJ 2024</p>
  </footer>

  <script>
    async function fetchAndProcessSinglePokemonData(pokemonID) {
      const response = await fetch(
        `https://pokeapi.co/api/v2/pokemon/${pokemonID}/#`
      );
      const singlePokemon = await response.json();
      const pokemonData = {
        id: singlePokemon.id,
        name: singlePokemon.name,
        types: singlePokemon.types.map((type) => type.type.name),
        image: singlePokemon.sprites.front_default,
        height: singlePokemon.height,
        weight: singlePokemon.weight,
        maxHP: singlePokemon.stats[0].base_stat,
        defense: singlePokemon.stats[2].base_stat,
        attack: singlePokemon.stats[1].base_stat,
      };
      return pokemonData;
    }

    // Functie om de pop-up te openen
    function openPopup() {
      document.getElementById("popup").style.display = "block";
      document.getElementById("overlay").style.display = "block";
    }

    // Functie om de pop-up te sluiten
    function closePopup() {
      document.getElementById("popup").style.display = "none";
      document.getElementById("overlay").style.display = "none";
    }

    // Functie om een pokemon te selecteren
    function selectPokemon(pokemonName) {
      alert(`Jij hebt ${pokemonName} geselecteerd`);
      closePopup();
      fetchAndProcessSinglePokemonData(pokemonName).then((pokemon) => {
        switchToSelectedPokemon(pokemon);
      });
    }

    function RandomNumber() {
      return Math.floor(Math.random() * 151);
    }

    function selectRandomPokemon() {
      selectPokemon(RandomNumber());
    }

    // Functie om de pop-up te openen
    function openPopupCurrentPokemon() {
      document.getElementById("popup-CurrentPokemon").style.display = "block";
      document.getElementById("overlay-CurrentPokemon").style.display = "block";
    }

    // Functie om de pop-up te sluiten
    function closePopupCurrentPokemon() {
      document.getElementById("popup-CurrentPokemon").style.display = "none";
      document.getElementById("overlay-CurrentPokemon").style.display = "none";
    }

    function selectCurrentPokemon(pokemonName) {
      alert(`Jij hebt ${pokemonName} geselecteerd`);
      closePopupCurrentPokemon();
      fetchAndProcessSinglePokemonData(pokemonName).then((pokemon) => {
        switchToSelectedCurrentPokemon(pokemon);
      });
    }

    // Functie om een pokemon te selecteren
    function switchToSelectedCurrentPokemon(pokemon) {
      var defaultElement = document.getElementById("current-pokemon");
      defaultElement.src = pokemon.image;
    }

    // Functie om een pokemon te selecteren
    function switchToSelectedPokemon(pokemon) {
      const defaultElement = document.getElementById(
        "flex-container-sengle-item"
      );
      const article = document.createElement("article");
      article.className = "flex-container-sengle-item";
      article.innerHTML = `
        <section style="position: relative;">
            <article>
                <figure>
                <h2> ${pokemon.name} </h2>
                <img src="${pokemon.image}" />
                </figure>
                <aside class="layer-close-button">
                <button style="margin: 15px;" onclick="openPopup()" type="submit">X</button>
                </aside>
            </a>
                <button
                    type="submit"
                    class="pokeball"
                    id="pokeball"
                    style="animation: none; position: absolute; bottom: -25%; left: 25%"
                ></button>
            </article>
        </section>
        `;
      if (defaultElement) {
        defaultElement.replaceWith(article);
      } else {
        const defaultElement = document.getElementsByClassName(
          "flex-container-sengle-item"
        )[0];
        defaultElement.replaceWith(article);
      }
    }

    // Functie om een Pokemon op naam te filteren
    function filterPokemonByName() {
      var input,
        filter,
        imageContainer,
        articles,
        figure,
        figcaption,
        p,
        i,
        txtValue;

      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      imageContainer = document.getElementById("image-container");
      articles = imageContainer.getElementsByTagName("article");

      for (i = 0; i < articles.length; i++) {
        figure = articles[i].getElementsByTagName("figure")[0];
        p = figure.getElementsByTagName("p")[0];
        txtValue = p.textContent || p.innerText;

        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          articles[i].style.display = "";
        } else {
          articles[i].style.display = "none";
        }
      }
    }

    // Functie om een Pokemon op naam te filteren
    function filterPokemonByNameHeader() {
      var input,
        filter,
        imageContainer,
        articles,
        figure,
        figcaption,
        p,
        i,
        txtValue;

      input = document.getElementById("myInputHeader");
      filter = input.value.toUpperCase();
      imageContainer = document.getElementById("image-container-header");
      articles = imageContainer.getElementsByTagName("article");

      for (i = 0; i < articles.length; i++) {
        figure = articles[i].getElementsByTagName("figure")[0];
        p = figure.getElementsByTagName("p")[0];
        txtValue = p.textContent || p.innerText;

        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          articles[i].style.display = "";
        } else {
          articles[i].style.display = "none";
        }
      }
    }

    // Functie om een Pokemon op naam te filteren (tijdelijk)
    function displayPokemonsIMGheader() {
      const defaultElement = document.getElementById("image-container-header");
      for (let i = 1; i <= 153; i++) {
        fetch(`https://pokeapi.co/api/v2/pokemon/${i}`)
          .then((response) => response.json())
          .then((pokemon) => {
            const pokemonName = pokemon.name;
            const pokemonImage = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${i}.png`;

            const pokemonHTML = `
              <article>
                <figure>
                  <img
                    src="${pokemonImage}"
                    onclick="selectCurrentPokemon('${pokemonName}')"
                  />
                  <figcaption>
                    <p>${pokemonName}</p>
                  </figcaption>
                </figure>
              </article>
            `;
            defaultElement.innerHTML += pokemonHTML;
          });
      }
    }
    displayPokemonsIMGheader();
    // Functie om een Pokemon op naam te filteren (tijdelijk)
    function displayPokemonsIMG() {
      const defaultElement = document.getElementById("image-container");
      for (let i = 1; i <= 153; i++) {
        fetch(`https://pokeapi.co/api/v2/pokemon/${i}`)
          .then((response) => response.json())
          .then((pokemon) => {
            const pokemonName = pokemon.name;
            const pokemonImage = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${i}.png`;

            const pokemonHTML = `
              <article>
                <figure>
                  <img
                    src="${pokemonImage}"
                    onclick="selectPokemon('${pokemonName}')"
                  />
                  <figcaption>
                    <p>${pokemonName}</p>
                  </figcaption>
                </figure>
              </article>
            `;
            defaultElement.innerHTML += pokemonHTML;
          });
      }
    }
    displayPokemonsIMG();
  </script>
</html>
